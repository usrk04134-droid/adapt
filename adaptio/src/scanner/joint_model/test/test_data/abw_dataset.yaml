---

images:
  - id: 3
    file_path: images/Image__2024-08-16__11-13-03.tiff
    joint_id: 2
    scanner_id: 2
  - id: 4
    file_path: images/Image__2024-08-16__11-13-22.tiff
    joint_id: 2
    scanner_id: 2
  - id: 5
    file_path: images/Image__2024-08-16__11-15-08.tiff
    joint_id: 2
    scanner_id: 2
  - id: 6
    file_path: images/Image__2024-08-16__11-15-17.tiff
    joint_id: 2
    scanner_id: 2
  - id: 7
    file_path: images/Image__2024-08-16__11-15-26.tiff
    joint_id: 2
    scanner_id: 2
  - id: 8
    file_path: images/Image__2024-08-16__11-15-32.tiff
    joint_id: 2
    scanner_id: 2
  - id: 9
    file_path: images/Image__2024-08-16__11-15-40.tiff
    joint_id: 2
    scanner_id: 2
  - id: 10
    file_path: images/top_surface_mismatch.tiff
    joint_id: 2
    scanner_id: 2
  - id: 11
    file_path: images/Image__2024-08-20__11-34-43.tiff
    joint_id: 2
    scanner_id: 2
  - id: 12
    file_path: images/Image__2024-08-20__11-34-49.tiff
    joint_id: 2
    scanner_id: 2
  - id: 13
    file_path: images/Image__2024-08-20__11-35-26.tiff
    joint_id: 2
    scanner_id: 2
  - id: 14
    file_path: images/Image__2024-08-20__11-35-36.tiff
    joint_id: 2
    scanner_id: 2
  - id: 15
    file_path: images/Image__2024-08-20__11-35-50.tiff
    joint_id: 2
    scanner_id: 2
  - id: 16
    file_path: images/Image__2024-08-20__11-36-16.tiff
    joint_id: 2
    scanner_id: 2
  - id: 17
    file_path: images/Image__2024-08-20__11-39-38.tiff
    joint_id: 2
    scanner_id: 2
  - id: 18
    file_path: images/Image__2024-08-20__11-39-50.tiff
    joint_id: 2
    scanner_id: 2
  - id: 19
    file_path: images/Image__2024-08-20__11-39-57.tiff
    joint_id: 2
    scanner_id: 2
  - id: 20
    file_path: images/Image__2024-08-20__11-40-09.tiff
    joint_id: 2
    scanner_id: 2
scanners:
  - id: 2
    file_path: scanners/new_cam_params_silverscanner.yaml
    serial_number: 123456

joints:
  - id: 2
    file_path: geometries/new_u_joint.yaml

# How to manually annotate data:
# 1. Open image in ImageJ
# 2. Zoom in on top corners and put the x and y coordinates in a yaml comment
#    on the same line as the "id: X", like:
#    id X: # p0x p0y p1x p1y p2x p2y p3x p3y p4x p4y p5x p5y p6x p6y 
# 3. Estimate p1 and p5 and put them in the same comment.
# 4. Enter garbage / dummy data in p2,p3,p4
# 5. Save data_set.yaml
# 6. Run this (replace the scanner config with the appropriate path)
#    egrep -o 'id: N # .*' tests/data_set/data_set.yaml | cut -f4- -d' ' | build/image-annotation --config tests/data_set/scanners/new_cam_params_silverscanner.yaml
# 7. Note the pixel deltas for p1 and p5, 'DX'
# 8. Use the ImageJ line tool to draw a line on the left joint wall. 
#    Ensure that the line extends below the bottom of the joint.
# 9. Translate the line DX pixels horizontally by clicking and dragging the middle handle of the line.
#    Hold down shift to move it only horizontally.
# 10. Note the intersection between the line and the center of the bottom profile.
# 11. Subtract DX from the x value of this point. This is the P1 value.
# 12. Repeat analogously for P5 value.
# 13. Run this Python function using the P1 and P5 x values:
#     def intermediate(p1, p5):
#       return np.round((p5-p1)/4 * np.array([1,2,3]) + p1).astype(np.int64)
# 14. Look at the y values at these exact x values. This gives P2 to P4.
# 15. Run this again to get the final abw_points_xs and abw_points_ys for the ABW points in laser plane coordinates:
#     egrep -o 'id: N # .*' tests/data_set/data_set.yaml | cut -f4- -d' ' | build/image-annotation --config tests/data_set/scanners/new_cam_params_silverscanner.yaml

annotations:
  - id: 1 # 1389 1506 1760 2367 1829 2369 1898 2374 1968 2371 2037 2367 2434 1514
    image_id: 1
    # ABW Proto
    abw_points_xs: [0.021071828281746093, 0.037055247527388216, 0.04132858578197897, 0.04560192403656972, 0.04987526229116048, 0.054148600545751234, 0.06993734259487057]
    abw_points_ys: [-0.06825377504177974, -0.18908299892901306, -0.189496105064152, -0.1891800704895486, -0.189125950783921, -0.18927204313419452, -0.06815783457090803]
    # Manual
    manual_abw_points_xs: [0.0211717,0.0379584,0.0420344,0.0461186,0.0502523,0.054315,0.0703776]
    manual_abw_points_ys: [-0.0682337,-0.191898,-0.192142,-0.192933,-0.192271,-0.191432,-0.0678599]
  - id: 2 # 1070 1502 1501 2363 1572 2367 1642 2372 1711 2368 1781 2365 2115 1510
    image_id: 2
    # ABW Proto
    abw_points_xs: [0.005774317955812398, 0.02185910506200217, 0.026156874899558785, 0.030454644737115403, 0.03475241457467202, 0.039050184412228635, 0.05493513081573579]
    abw_points_ys: [-0.06824597325630631, -0.18811844633429448, -0.18823718442380857, -0.18945693201359212, -0.18922498052950598, -0.18944325090178873, -0.06807583689443171]
    # Manual
    manual_abw_points_xs: [0.00616773,0.0226737,0.0268491,0.0309711,0.0350618,0.0392002,0.0553421]
    manual_abw_points_ys: [-0.0681764,-0.191627,-0.192225,-0.193009,-0.192163,-0.1915,-0.0677909]
  - id: 3 # 1455 215 1621 752 1710 756 1799 768 1888 756 1974 754 2141 246
    image_id: 3
    abw_points_xs: [0.0394735,0.0459291,0.0494897,0.0530746,0.0566018,0.06003,0.064345]
    abw_points_ys: [0.0459356,0.00591587,0.00567378,0.00476669,0.00585357,0.0061066,0.0444451]
  - id: 4 # 1454 212 1621 752 1710 754 1799 767 1889 754 1978 751 2143 245
    image_id: 4
    abw_points_xs: [0.0394383,0.0459291,0.0494864,0.0530722,0.0566356,0.0601783,0.0644133]
    abw_points_ys: [0.0461375,0.00591587,0.00583949,0.00484993,0.00602021,0.0063588,0.0445152]
  - id: 5 # 1480 365 1646 878 1732 882 1817 891 1903 880 1988 876 2150 394
    image_id: 5
    abw_points_xs: [0.040356,0.0470767,0.050607,0.054115,0.0576089,0.0610746,0.0653201]
    abw_points_ys: [0.0355344,-0.00475701,-0.00501648,-0.00571419,-0.00466403,-0.00422705,0.0340763]
  - id: 6 # 1486 488 1641 978 1725 982 1809 992 1893 984 1977 981 2138 518
    image_id: 6
    abw_points_xs: [0.0405664,0.0469914,0.0505119,0.054054,0.0575487,0.0610521,0.0654341]
    abw_points_ys: [0.0265532,-0.0136532,-0.0139272,-0.0147483,-0.0139296,-0.013567,0.0249215]
  - id: 7 # 1475 283 1639 810 1726 813 1814 825 1902 815 1989 811 2153 316
    image_id: 7
    abw_points_xs: [0.0401842,0.0467125,0.0502326,0.05382,0.0573522,0.0608533,0.065084]
    abw_points_ys: [0.0412982,0.00107684,0.000911142,-1.8682e-05,0.000921895,0.00135055,0.0396181]
  - id: 8 # 1353 279 1524 805 1612 809 1700 820 1788 811 1876 807 2031 311
    image_id: 8
    abw_points_xs: [0.0357308,0.0420649,0.0456207,0.049193,0.0527338,0.0562766,0.0605858]
    abw_points_ys: [0.0414683,0.00138364,0.00113413,0.000290129,0.00114401,0.00157272,0.0398535]
  - id: 9 # 1531 281 1686 806 1774 811 1862 822 1949 813 2037 809 2208 313
    image_id: 9
    abw_points_xs: [0.0422294,0.0486052,0.0521682,0.0557557,0.0592449,0.0627834,0.0670895]
    abw_points_ys: [0.0414862,0.00146319,0.00112969,0.000286076,0.00113988,0.0015694,0.0398799]
  - id: 10 # 1586 1470 1705 1800 1776 1803 1846 1809 1917 1803 1988 1802 2148 1426
    image_id: 10
    abw_points_xs: [0.0450931,0.0514282,0.0550256,0.0585907,0.0621532,0.0657357,0.0709831]
    abw_points_ys: [-0.0635028,-0.103693,-0.103995,-0.104698,-0.103806,-0.103579,-0.0579145]
  - id: 11 # 1439 1354 1576 1701 1648 1703 1720 1710 1792 1703 1864 1701 1990 1373
    image_id: 11
    abw_points_xs: [0.0383158,0.0448204,0.0483731,0.051942,0.0554734,0.0590142,0.0634224]
    abw_points_ys: [-0.0509335,-0.0910697,-0.0912273,-0.0920177,-0.0910389,-0.0906932,-0.0523225]
  - id: 12 # 1367 1353 1508 1700 1580 1703 1652 1709 1725 1703 1797 1702 1917 1372
    image_id: 12
    abw_points_xs: [0.0350469,0.0414678,0.0450194,0.0485812,0.05217,0.0557163,0.0600912]
    abw_points_ys: [-0.0509117,-0.0910334,-0.0913168,-0.0919804,-0.0911264,-0.0909063,-0.052301]
  - id: 13 # 1456 1043 1599 1437 1676 1440 1752 1448 1829 1440 1906 1438 2044 1064
    image_id: 13
    abw_points_xs: [0.0392268,0.045665,0.0492333,0.0527732,0.0563161,0.0598714,0.0642559]
    abw_points_ys: [-0.0198338,-0.0597921,-0.0600324,-0.0608319,-0.0598477,-0.0595328,-0.0211625]
  - id: 14 # 1358 1043 1508 1437 1585 1439 1662 1447 1738 1440 1815 1438 1946 1064
    image_id: 14
    abw_points_xs: [0.0350697,0.0414537,0.0450189,0.0485971,0.0521036,0.0556613,0.0600842]
    abw_points_ys: [-0.0199392,-0.0599023,-0.0600314,-0.0608293,-0.0599575,-0.0596423,-0.0212697]
  - id: 15 # 1401 1043 1545 1437 1622 1438 1700 1446 1778 1440 1855 1438 1988 1064
    image_id: 15
    abw_points_xs: [0.0368939,0.0431661,0.0467305,0.0503572,0.0539553,0.057512,0.0618721]
    abw_points_ys: [-0.019893,-0.0598575,-0.0598754,-0.0606717,-0.0599092,-0.0595942,-0.0212238]
  - id: 16 # 1485 1064 1623 1455 1700 1457 1776 1465 1853 1458 1930 1456 2070 1086
    image_id: 16
    abw_points_xs: [0.0404535,0.0467988,0.0503806,0.0539366,0.057495,0.0610646,0.0654766]
    abw_points_ys: [-0.0217714,-0.0617712,-0.0619017,-0.0627078,-0.0618283,-0.0615111,-0.0232118]
  - id: 17 # 1587 1182 1709 1555 1784 1556 1859 1564 1934 1558 2009 1555  2178 1155
    image_id: 17
    abw_points_xs: [0.0448917,0.0510227,0.0545932,0.0581933,0.0617381,0.0652898,0.0705292]
    abw_points_ys: [-0.0330553,-0.073134,-0.0731577,-0.0740053,-0.0732059,-0.0727608,-0.0297364]
  - id: 18 # 1568 1181 1691 1554 1766 1556 1841 1564 1916 1558 1991 1556 2160 1149
    image_id: 18
    abw_points_xs: [0.0440609,0.0501644,0.0537369,0.0573354,0.0608815,0.0644394,0.0697106]
    abw_points_ys: [-0.0329775,-0.0730391,-0.0731802,-0.0740278,-0.0732283,-0.0729004,-0.0291709]
  - id: 19 # 1470 1178 1606 1550 1681 1551 1756 1561 1830 1554 1905 1551 2067 1131
    image_id: 19
    abw_points_xs: [0.0397804,0.0461171,0.0496828,0.0532755,0.056774,0.0603261,0.0655835]
    abw_points_ys: [-0.0327905,-0.0726764,-0.0726997,-0.0737806,-0.0728656,-0.0724208,-0.0275267]
  - id: 20 # 1307 1309 1455 1662 1528 1664 1601 1672 1674 1665 1747 1663 1885 1261
    image_id: 20
    abw_points_xs: [0.0324099,0.0388774,0.0424431,0.0460186,0.0495768,0.053137,0.0582022]
    abw_points_ys: [-0.0463211,-0.0863565,-0.0865087,-0.0874062,-0.0864428,-0.0861008,-0.040676]

